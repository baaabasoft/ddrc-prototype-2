<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DDRC Laboratory Queue System</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <!-- Header / Navbar -->
    <header>
        <div class="container header-content">
            <div class="logo">DDRC <span>Queue Prototype</span></div>
            <div class="time-display" id="time-display"></div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="container">

        <!-- HOME VIEW -->
        <section id="home-view" class="view-section">
            <div class="text-center" style="text-align: center; margin-bottom: 40px;">
                <h1>Welcome to DDRC Diagnostic Centre</h1>
                <p style="color: var(--text-light); font-size: 1.1rem; margin-top: 10px;">Select an option to proceed
                </p>
            </div>

            <div class="card-grid">
                <!-- Registration -->
                <div class="nav-card" onclick="APP.navigateTo('registration-view')">
                    <span class="nav-icon">üìù</span>
                    <h3>Customer Registration</h3>
                    <p>Register new patients and assign tokens.</p>
                </div>

                <!-- Queue Display -->
                <div class="nav-card" onclick="APP.navigateTo('queue-view')">
                    <span class="nav-icon">üì∫</span>
                    <h3>Queue Display</h3>
                    <p>Live view of current token status.</p>
                </div>

                <!-- Admin/Staff -->
                <div class="nav-card" onclick="APP.navigateTo('admin-login-view')">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <h3>Staff / Admin</h3>
                    <p>Manage queues and call next patients.</p>
                </div>
            </div>
        </section>

        <!-- REGISTRATION VIEW -->
        <section id="registration-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('home-view')">‚Üê Back to Home</button>

            <div
                style="background: white; padding: 40px; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm);">
                <h2 style="margin-bottom: 30px;">New Patient Registration</h2>

                <form id="registration-form" onsubmit="event.preventDefault(); APP.handleProceed();">
                    <div class="form-group">
                        <label class="form-label">Patient Name</label>
                        <input type="text" id="p-name" class="form-control" placeholder="Enter full name" required>
                    </div>

                    <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <div>
                            <label class="form-label">Mobile Number</label>
                            <input type="tel" id="p-mobile" class="form-control" placeholder="10-digit mobile number"
                                required pattern="[0-9]{10}">
                        </div>
                        <div>
                            <label class="form-label">Age</label>
                            <input type="number" id="p-age" class="form-control" placeholder="Years" required min="1"
                                max="120">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" style="margin-bottom: 15px;">Select Tests</label>
                        <input type="text" id="test-search" class="form-control" placeholder="üîç Search for tests..."
                            style="margin-bottom: 15px;">

                        <div class="test-grid" id="test-list-container">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div style="margin-top: 40px; text-align: right;">
                        <button type="submit" class="btn btn-primary btn-lg">Proceed &rarr;</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- PAYMENT VIEW -->
        <section id="payment-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('registration-view')">‚Üê Back to
                Registration</button>

            <div
                style="max-width: 800px; margin: 0 auto; background: white; border-radius: 16px; padding: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px;">
                    <h2 style="margin: 0;">Payment Details</h2>
                    <button class="btn btn-secondary" onclick="APP.navigateTo('registration-view')"
                        style="padding: 5px 15px; font-size: 0.9rem;">‚úèÔ∏è Edit</button>
                </div>

                <!-- Preview -->
                <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="color: #64748b;">Patient Name:</span>
                        <strong id="pay-preview-name">--</strong>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span style="color: #64748b;">Mobile:</span>
                        <strong id="pay-preview-mobile">--</strong>
                    </div>
                    <div style="margin-top: 15px; border-top: 1px dashed #cbd5e1; padding-top: 10px;">
                        <div id="pay-test-list">
                            <!-- JS Populated -->
                        </div>
                    </div>
                    <div
                        style="display: flex; justify-content: space-between; margin-top: 20px; font-size: 1.2rem; font-weight: 700; color: #0f172a;">
                        <span>Total Amount:</span>
                        <span id="pay-total-amount">‚Çπ 0</span>
                    </div>
                </div>

                <h3>Select Payment Mode</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                    <div onclick="APP.handlePayment('desk')"
                        style="border: 2px solid #e2e8f0; padding: 30px; border-radius: 12px; text-align: center; cursor: pointer; transition: all 0.2s;"
                        onmouseover="this.style.borderColor='var(--primary-color)'; this.style.backgroundColor='#f0fdfc'"
                        onmouseout="this.style.borderColor='#e2e8f0'; this.style.backgroundColor='transparent'">
                        <div style="font-size: 3rem;">üíµ</div>
                        <h3>Desk Payment</h3>
                        <p style="color: #64748b;">Cash / Card at Counter</p>
                    </div>

                    <div onclick="APP.handlePayment('online')"
                        style="border: 2px solid #e2e8f0; padding: 30px; border-radius: 12px; text-align: center; cursor: pointer; transition: all 0.2s;"
                        onmouseover="this.style.borderColor='var(--primary-color)'; this.style.backgroundColor='#f0fdfc'"
                        onmouseout="this.style.borderColor='#e2e8f0'; this.style.backgroundColor='transparent'">
                        <div style="font-size: 3rem;">üì±</div>
                        <h3>Online Payment</h3>
                        <p style="color: #64748b;">UPI / QR Code</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- QR MODAL -->
        <div id="qr-modal" class="modal-overlay hidden"
            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000; align-items: center; justify-content: center; display: none;">
            <div
                style="background: white; padding: 40px; border-radius: 16px; text-align: center; max-width: 400px; width: 90%;">
                <h2>Scan to Pay</h2>
                <div
                    style="margin: 30px auto; background: #eee; width: 200px; height: 200px; display: flex; align-items: center; justify-content: center; font-family: monospace; font-size: 1.5rem;">
                    [ QR CODE ]
                </div>
                <p>Please scan using any UPI App</p>
                <button class="btn btn-primary" style="width: 100%; margin-top: 20px;"
                    onclick="APP.confirmOnlinePayment()">Payment Done</button>
                <button class="btn btn-secondary" style="width: 100%; margin-top: 10px;"
                    onclick="document.getElementById('qr-modal').style.display='none'">Cancel</button>
            </div>
        </div>

        <!-- SUCCESS TOKEN MODAL (Replacing View) -->
        <div id="token-success-modal" class="modal-overlay hidden"
            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2100; align-items: center; justify-content: center; display: none;">
            <div
                style="background: white; padding: 50px; border-radius: 16px; text-align: center; max-width: 450px; width: 90%;">
                <div style="font-size: 4rem; margin-bottom: 20px;">‚úÖ</div>
                <h2 style="color: var(--success);">Token Generated!</h2>

                <div
                    style="background: #f1f5f9; padding: 20px; border-radius: 12px; margin: 30px 0; border: 2px dashed #94a3b8;">
                    <div style="font-size: 1rem; color: #64748b; text-transform: uppercase;">Token Number</div>
                    <div id="final-token-display"
                        style="font-size: 4rem; font-weight: 800; color: var(--primary-color);">T-000</div>
                    <div id="final-name-display" style="margin-top: 10px; font-weight: 700; font-size: 1.2rem;">Patient
                        Name</div>
                    <div id="final-mobile-display" style="color: #64748b;">Mobile: 0000000000</div>
                </div>

                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" style="flex: 1;" onclick="alert('üñ®Ô∏è Printing Token...')">üñ®Ô∏è
                        Print</button>
                    <button class="btn btn-primary" style="flex: 1;" onclick="APP.doneRegistration()">Done</button>
                </div>
            </div>
        </div>

        <!-- QUEUE VIEW -->
        <section id="queue-view" class="view-section hidden">
            <div class="header-content" style="margin-bottom: 30px;">
                <button class="btn btn-secondary btn-back" style="margin:0" onclick="APP.navigateTo('home-view')">‚Üê Back
                    to Home</button>
                <h1>Live Queue Status</h1>
            </div>

            <div id="queue-grid" class="card-grid">
                <!-- Dynamic Queue Cards will appear here -->
            </div>
        </section>

        <!-- ADMIN LOGIN VIEW -->
        <section id="admin-login-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('home-view')">‚Üê Back to Home</button>
            <div class="login-container">
                <div class="login-tabs"
                    style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #eee;">
                    <div id="tab-login-admin" class="login-tab active" onclick="APP.switchLoginTab('admin')"
                        style="flex:1; padding: 10px; cursor: pointer; font-weight: 600; border-bottom: 2px solid var(--primary-color);">
                        Admin Login
                    </div>
                    <div id="tab-login-staff" class="login-tab" onclick="APP.switchLoginTab('staff')"
                        style="flex:1; padding: 10px; cursor: pointer; font-weight: 600; color: #aaa;">
                        Staff Login
                    </div>
                </div>

                <h2 id="login-title" style="color: var(--primary-color); margin-bottom: 10px;">Admin Access</h2>
                <p id="login-subtitle" style="color: var(--text-light); margin-bottom: 30px;">System Configuration
                    Dashboard</p>

                <form id="login-form">
                    <input type="hidden" id="login-type" value="admin">
                    <div class="form-group" style="text-align: left;">
                        <label class="form-label">Username</label>
                        <input type="text" id="login-user" class="form-control" placeholder="admin" required>
                    </div>
                    <div class="form-group" style="text-align: left;">
                        <label class="form-label">Password</label>
                        <input type="password" id="login-pass" class="form-control" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                    <p style="margin-top: 15px; font-size: 0.8rem; color: var(--text-light);">
                        Default: admin/admin or rajesh.kumar/pass
                    </p>
                </form>
            </div>
        </section>

        <!-- STAFF DASHBOARD VIEW -->
        <section id="staff-dashboard-view" class="view-section hidden">
            <div class="header-content" style="margin-bottom: 20px;">
                <div>
                    <h1 id="staff-welcome">Welcome, Staff</h1>
                    <p id="staff-dept-label" style="color: var(--text-light);">Department View</p>
                </div>
                <button class="btn btn-secondary" onclick="APP.navigateTo('home-view')">Logout</button>
            </div>

            <div class="staff-layout" style="display: grid; grid-template-columns: 2fr 1fr; gap: 30px;">
                <!-- Queue Column -->
                <div class="panel"
                    style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: var(--secondary-color);">Waiting Queue</h2>
                        <span class="badge badge-active" id="staff-queue-count">0 Waiting</span>
                    </div>

                    <div id="staff-queue-list" style="display: flex; flex-direction: column; gap: 15px;">
                        <!-- Dynamic Patient Cards -->
                    </div>
                </div>

                <!-- Action Column -->
                <div class="panel">
                    <div
                        style="background: var(--primary-color); color: white; padding: 30px; border-radius: 12px; text-align: center; margin-bottom: 30px;">
                        <span style="display: block; font-size: 0.9rem; opacity: 0.9; margin-bottom: 10px;">CURRENTLY
                            SERVING</span>
                        <h1 id="staff-serving-token" style="font-size: 3.5rem; font-weight: 800; margin-bottom: 5px;">--
                        </h1>
                        <p id="staff-serving-name" style="font-weight: 500;">No Active Patient</p>
                    </div>

                    <div id="staff-actions" class="hidden">
                        <button class="btn btn-secondary"
                            style="width: 100%; margin-bottom: 15px; border: 2px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.1);"
                            onclick="APP.callCustomer()">
                            üì¢ Call Customer
                        </button>
                        <button class="btn btn-primary" style="width: 100%; padding: 15px;"
                            onclick="APP.openAssignModal()">
                            ‚úÖ Complete & Assign
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ASSIGN MODAL (Hidden by default) -->
        <div id="assign-modal" class="modal-overlay hidden"
            style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: none; align-items: center; justify-content: center;">
            <div
                style="background: white; width: 500px; padding: 30px; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.2);">
                <h2 style="margin-bottom: 5px;">Complete & Assign</h2>
                <p style="color: var(--text-light); margin-bottom: 20px;">Select the next destination for <strong
                        id="assign-token-display">T-100</strong></p>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px; font-size: 0.9rem; color: #666;">Pending Tests:</h4>
                    <ul id="assign-pending-tests" style="padding-left: 20px; font-size: 0.9rem;">
                        <!-- JS populated -->
                    </ul>
                </div>

                <!-- AI Suggestion -->
                <div id="ai-suggestion-box"
                    style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; border-radius: 4px; margin-bottom: 20px; display: none;">
                    <strong style="color: #0d47a1;">üí° AI Recommendation:</strong>
                    <p style="margin: 5px 0 0; font-size: 0.9rem;" id="ai-suggestion-text">Radiology (Wait time < 5
                            mins)</p>
                </div>

                <div class="form-group">
                    <label class="form-label">Forward To:</label>
                    <select id="assign-next-dept" class="form-control">
                        <!-- Populated by JS -->
                    </select>
                </div>

                <div style="text-align: right; margin-top: 30px; display: flex; gap: 10px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="APP.closeAssignModal()">Cancel</button>
                    <button class="btn btn-primary" onclick="APP.submitAssignment()">Confirm Transfer</button>
                </div>
            </div>
        </div>

        <!-- ADMIN DASHBOARD VIEW -->
        <section id="admin-dashboard-view" class="view-section hidden">
            <div class="header-content" style="margin-bottom: 20px; display: flex; align-items: center; gap: 20px;">
                <button class="btn btn-secondary" onclick="APP.toggleSidebar()"
                    style="padding: 8px 12px; font-size: 1.2rem;">‚ò∞</button>
                <div style="flex: 1;">
                    <h1 style="margin: 0;">Admin Dashboard <span id="admin-branch-label"
                            style="font-size: 1rem; color: var(--text-light); font-weight: 400;">| Kochi Main
                            Branch</span>
                    </h1>
                </div>
                <button class="btn btn-secondary" onclick="APP.navigateTo('home-view')">Logout</button>
            </div>

            <div class="admin-layout">
                <!-- Sidebar -->
                <nav id="admin-sidebar-nav" class="admin-sidebar" style="display: flex; flex-direction: column;">
                    <a class="admin-nav-item active" onclick="APP.switchAdminTab('tab-regions')">üåé Regions</a>
                    <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-branches')">üìç Branches</a>
                    <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-depts')">üè¢ Departments</a>
                    <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-users')">üë• User Management</a>
                    <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-roles')">üîê User Roles</a>
                    <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-tests')">üß™ Tests</a>
                    <div style="margin-top: 15px; border-top: 1px solid #eee; padding-top: 15px;">
                        <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-queue')">üìä Queue Management</a>
                        <a class="admin-nav-item" onclick="APP.switchAdminTab('tab-customers')">üë§ Customers</a>
                    </div>
                </nav>

                <!-- Content Area -->
                <main class="admin-content">
                    <!-- Regions Tab -->
                    <div id="tab-regions" class="admin-tab-content">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>Region Management</h2>
                            <button class="btn btn-primary" onclick="APP.openRegionEdit()">+ Create New Region</button>
                        </div>
                        <div class="card">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Region Name</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="regions-table-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Branch Management TAB -->
                    <div id="tab-branches" class="admin-tab-content hidden">
                        <h2>Branch Management</h2>
                        <p style="color: var(--text-light); margin-bottom: 20px;">Manage queue availability across
                            ERP-linked branches.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Branch Name</th>
                                    <th>Region</th>
                                    <th>Code</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="branches-table-body">
                                <!-- Dynamic Content -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Department Management TAB -->
                    <div id="tab-depts" class="admin-tab-content hidden">
                        <h2>Department Management</h2>
                        <p style="color: var(--text-light); margin-bottom: 20px;">Configure department status and
                            service times.</p>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Department</th>
                                    <th>Code</th>
                                    <th>Branches</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="depts-table-body">
                                <!-- Dynamic Content -->
                            </tbody>
                        </table>
                    </div>

                    <!-- User Management TAB -->
                    <div id="tab-users" class="admin-tab-content hidden">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>User Management</h2>
                            <button class="btn btn-primary" onclick="APP.showAddUserModal()">+ Add New User</button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Username</th>
                                    <th>Role</th>
                                    <th>Branch</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="users-table-body">
                                <!-- Dynamic Content -->
                            </tbody>
                        </table>
                    </div>

                    <!-- User Roles TAB -->
                    <div id="tab-roles" class="admin-tab-content hidden">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>User Role Management</h2>
                            <button class="btn btn-primary" onclick="APP.openRoleEdit()">+ Create New Role</button>
                        </div>
                        <div class="card">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Role Name</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="roles-table-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Test Mapping TAB -->
                    <div id="tab-tests" class="admin-tab-content hidden">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>Tests</h2>
                            <button class="btn btn-primary" onclick="APP.openTestEdit()">+ Create New Test</button>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <input type="text" class="form-control" placeholder="Search tests..."
                                style="max-width: 300px;">
                        </div>

                        <div style="max-height: 500px; overflow-y: auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Test Name</th>
                                        <th>Code</th>
                                        <th>Price</th>
                                        <th>Branches</th>
                                        <th>Department</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="tests-table-body">
                                    <!-- Dynamic Content -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Queue Management TAB (NEW) -->
                    <div id="tab-queue" class="admin-tab-content hidden">
                        <div class="queue-header" style="margin-bottom: 20px;">
                            <h2>Queue Management</h2>
                        </div>

                        <!-- Filter Bar -->
                        <div
                            style="background: #f8f9fa; padding: 15px; border-radius: var(--radius-sm); margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border-color);">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <label style="font-weight: 600; color: var(--secondary-color);">Select Branch:</label>
                                <select id="queue-branch-select" class="form-control" style="width: 250px;"
                                    onchange="APP.renderQueueDashboard()">
                                    <!-- Populated by JS -->
                                </select>
                            </div>
                            <button class="btn btn-secondary" onclick="APP.showAiSuggestions()">‚ú® AI Analysis &
                                Suggestions</button>
                        </div>

                        <!-- Stats Tiles -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <h3>Active Customers</h3>
                                <p class="stat-value" id="stat-active-customers">0</p>
                            </div>
                            <div class="stat-card">
                                <h3>Total Visits</h3>
                                <p class="stat-value" id="stat-total-visits">0</p>
                            </div>
                            <div class="stat-card">
                                <h3>Tests Completed</h3>
                                <p class="stat-value" id="stat-tests-completed">0</p>
                            </div>
                        </div>

                        <!-- Kanban Board -->
                        <div class="kanban-board" id="kanban-board">
                            <!-- Dynamic Columns -->
                        </div>
                    </div>

                    <!-- Customer Management TAB (NEW) -->
                    <div id="tab-customers" class="admin-tab-content hidden">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h2>Customer Management</h2>
                            <div style="display: flex; gap: 10px;">
                                <select id="customer-region-filter" class="form-control" style="width: 180px;"
                                    onchange="APP.filterCustomersByRegion()">
                                    <option value="">All Regions</option>
                                    <!-- Populated by JS -->
                                </select>
                                <select id="customer-branch-filter" class="form-control" style="width: 200px;"
                                    onchange="APP.filterCustomers()">
                                    <option value="">All Branches</option>
                                    <!-- Populated by JS -->
                                </select>
                            </div>
                        </div>

                        <div style="max-height: 600px; overflow-y: auto;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Mobile</th>
                                        <th>Branch</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="customers-table-body">
                                    <!-- Dynamic Content -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </main>

            </div>
        </section>

        <!-- ADMIN DEPT EDIT VIEW -->
        <section id="admin-dept-edit-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('admin-dashboard-view')">‚Üê Back to
                Dashboard</button>
            <div class="edit-view-container">
                <h2>Edit Department</h2>
                <form id="dept-edit-form">
                    <input type="hidden" id="edit-dept-id">

                    <div class="flex-row">
                        <div class="col-half form-group">
                            <label class="form-label">Department Name</label>
                            <input type="text" id="edit-dept-name" class="form-control" readonly>
                        </div>
                        <div class="col-half form-group">
                            <label class="form-label">Code</label>
                            <input type="text" id="edit-dept-code" class="form-control" readonly>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Filter by Region</label>
                        <select id="dept-region-filter" class="form-control"
                            onchange="APP.filterDeptBranchesByRegion()">
                            <option value="">All Regions</option>
                            <!-- Populated by JS -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Assigned Branches</label>
                        <div id="edit-dept-branches-container" class="multi-select-grid">
                            <!-- Populated by JS -->
                        </div>
                    </div>



                    <div class="form-group">
                        <label class="form-label">Queue Status</label>
                        <label class="switch">
                            <input type="checkbox" id="edit-dept-status">
                            <span class="slider"></span>
                        </label>
                        <span id="edit-dept-status-label" style="margin-left: 10px; font-weight: 500;">Active</span>
                    </div>

                    <div style="margin-top: 30px; text-align: right;">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ADMIN USER MANAGE VIEW (Create/Edit) -->
        <section id="admin-user-edit-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('admin-dashboard-view')">‚Üê Back to
                Dashboard</button>
            <div class="edit-view-container">
                <h2 id="user-edit-title">Manage User</h2>
                <form id="user-edit-form">
                    <input type="hidden" id="edit-user-id">

                    <div class="flex-row">
                        <div class="col-half form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" id="edit-user-name" class="form-control" required>
                        </div>
                        <div class="col-half form-group">
                            <label class="form-label">Username</label>
                            <input type="text" id="edit-user-username" class="form-control" required>
                        </div>
                    </div>

                    <div class="flex-row">
                        <div class="col-half form-group">
                            <label class="form-label">User Role</label>
                            <select id="edit-user-role" class="form-control" required>
                                <!-- Populated by JS -->
                            </select>
                        </div>
                        <div class="col-half form-group">
                            <label class="form-label">Assigned Region</label>
                            <select id="edit-user-region" class="form-control"
                                onchange="APP.filterUserBranchesByRegion()" required>
                                <option value="">Select Region</option>
                                <!-- Populated by JS -->
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Assigned Branches</label>
                        <div id="edit-user-branches-container" class="multi-select-grid">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div class="form-group" id="user-status-group">
                        <label class="form-label">Account Status</label>
                        <label class="switch">
                            <input type="checkbox" id="edit-user-status">
                            <span class="slider"></span>
                        </label>
                        <span id="edit-user-status-label" style="margin-left: 10px; font-weight: 500;">Active</span>
                    </div>

                    <div style="margin-top: 30px; display: flex; justify-content: space-between;">
                        <button type="button" id="btn-resend-creds" class="btn btn-secondary"
                            onclick="APP.handleResendCreds()">üìß Resend Credentials</button>
                        <button type="submit" class="btn btn-primary" id="btn-save-user">Save User</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ADMIN BRANCH EDIT VIEW -->
        <section id="admin-branch-edit-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('admin-dashboard-view')">‚Üê Back to
                Dashboard</button>
            <div class="edit-view-container">
                <h2 id="branch-edit-title">Edit Branch</h2>
                <form id="branch-edit-form">
                    <input type="hidden" id="edit-branch-id">
                    <div class="form-group">
                        <label class="form-label">Branch Name</label>
                        <input type="text" id="edit-branch-name" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Assigned Region</label>
                        <select id="edit-branch-region" class="form-control" required>
                            <!-- Populated by JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Branch Code</label>
                        <input type="text" id="edit-branch-code" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Queue Status</label>
                        <label class="switch">
                            <input type="checkbox" id="edit-branch-status">
                            <span class="slider"></span>
                        </label>
                        <span id="edit-branch-status-label" style="margin-left: 10px; font-weight: 500;">Active</span>
                    </div>
                    <div style="margin-top: 30px; text-align: right;">
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ADMIN TEST EDIT VIEW -->
        <section id="admin-test-edit-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('admin-dashboard-view')">‚Üê Back to
                Dashboard</button>
            <div class="edit-view-container">
                <h2 id="test-edit-title">Edit Test</h2>
                <form id="test-edit-form">
                    <input type="hidden" id="edit-test-id">

                    <div class="flex-row">
                        <div class="col-half form-group">
                            <label class="form-label">Test Name</label>
                            <input type="text" id="edit-test-name" class="form-control" required>
                        </div>
                        <div class="col-half form-group">
                            <label class="form-label">Test Code</label>
                            <input type="text" id="edit-test-code" class="form-control" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Price (‚Çπ)</label>
                        <input type="number" id="edit-test-price" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Filter by Region</label>
                        <select id="test-region-filter" class="form-control"
                            onchange="APP.filterTestBranchesByRegion()">
                            <option value="">All Regions</option>
                            <!-- Populated by JS -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Assign Branches</label>
                        <div id="edit-test-branches-container" class="multi-select-grid">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Assign Department (Queue Routing)</label>
                        <select id="edit-test-dept" class="form-control">
                            <!-- Populated by JS -->
                        </select>
                    </div>

                    <div style="margin-top: 30px; text-align: right;">
                        <button type="submit" class="btn btn-primary">Save Mapping</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ADMIN ROLE EDIT VIEW -->
        <section id="admin-role-edit-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('admin-dashboard-view')">‚Üê Back to
                Dashboard</button>
            <div class="edit-view-container">
                <h2 id="role-edit-title">Edit Role</h2>
                <form id="role-edit-form">
                    <input type="hidden" id="edit-role-id">
                    <div class="form-group">
                        <label class="form-label">Role Name</label>
                        <input type="text" id="edit-role-name" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Module Permissions</label>
                        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                            <table class="data-table" style="margin: 0;">
                                <thead>
                                    <tr>
                                        <th style="width: 40%;">Module</th>
                                        <th style="text-align: center;">View</th>
                                        <th style="text-align: center;">Edit</th>
                                        <th style="text-align: center;">Create</th>
                                    </tr>
                                </thead>
                                <tbody id="role-permissions-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div style="margin-top: 30px; text-align: right;">
                        <button type="button" class="btn btn-secondary"
                            onclick="APP.navigateTo('admin-dashboard-view')">Cancel</button>
                        <button type="submit" class="btn btn-primary" id="btn-save-role">Save Role</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- ADMIN CUSTOMER DETAIL VIEW -->
        <section id="admin-customer-detail-view" class="view-section hidden">
            <button class="btn btn-secondary btn-back" onclick="APP.navigateTo('admin-dashboard-view')">‚Üê Back to
                Dashboard</button>
            <div class="edit-view-container">
                <h2>Customer Details</h2>
                <div id="customer-detail-content">
                    <!-- Dynamic -->
                </div>
            </div>
        </section>

    </main>

    <!-- Scripts -->
    <script src="js/data.js"></script>
    <script src="js/app.js"></script>
</body>

</html>